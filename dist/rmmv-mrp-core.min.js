!function e(t,n,r){function a(i,u){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var s=n[i]={exports:{}};t[i][0].call(s.exports,function(e){var n=t[i][1][e];return a(n?n:e)},s,s.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,t,n){!function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),r=n&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),a=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,o=(n||a)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,o,i,u,c,l;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),o=new ArrayBuffer(t.length),i=new Uint8Array(o),u=0;u<t.length;u+=1)i[u]=t.charCodeAt(u);return c=e.split(",")[0].split(":")[1].split(";")[0],n?new Blob([r?i:o],{type:c}):(l=new a,l.append(o),l.getBlob(c))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,n,r){e(r&&t.toDataURL&&o?o(this.toDataURL(n,r)):this.mozGetAsFile("blob",n))}:t.toDataURL&&o&&(t.toBlob=function(e,t,n){e(o(this.toDataURL(t,n)))})),"function"==typeof define&&define.amd?define(function(){return o}):e.dataURLtoBlob=o}(window)},{}],2:[function(e,t,n){var r=r||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in r,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=e.webkitRequestFileSystem,u=e.requestFileSystem||i||e.mozRequestFileSystem,c=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",s=0,f=500,p=function(t){var r=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};e.chrome?r():setTimeout(r,f)},d=function(e,t,n){t=[].concat(t);for(var r=t.length;r--;){var a=e["on"+t[r]];if("function"==typeof a)try{a.call(e,n||e)}catch(o){c(o)}}},v=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},g=function(t,c,f){f||(t=v(t));var g,m,y,h=this,b=t.type,_=!1,w=function(){d(h,"writestart progress write writeend".split(" "))},E=function(){if((_||!g)&&(g=n().createObjectURL(t)),m)m.location.href=g;else{var r=e.open(g,"_blank");void 0==r&&"undefined"!=typeof safari&&(e.location.href=g)}h.readyState=h.DONE,w(),p(g)},T=function(e){return function(){return h.readyState!==h.DONE?e.apply(this,arguments):void 0}},O={create:!0,exclusive:!1};return h.readyState=h.INIT,c||(c="download"),a?(g=n().createObjectURL(t),r.href=g,r.download=c,void setTimeout(function(){o(r),w(),p(g),h.readyState=h.DONE})):(e.chrome&&b&&b!==l&&(y=t.slice||t.webkitSlice,t=y.call(t,0,t.size,l),_=!0),i&&"download"!==c&&(c+=".download"),(b===l||i)&&(m=e),u?(s+=t.size,void u(e.TEMPORARY,s,T(function(e){e.root.getDirectory("saved",O,T(function(e){var n=function(){e.getFile(c,O,T(function(e){e.createWriter(T(function(n){n.onwriteend=function(t){m.location.href=e.toURL(),h.readyState=h.DONE,d(h,"writeend",t),p(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&E()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=h["on"+e]}),n.write(t),h.abort=function(){n.abort(),h.readyState=h.DONE},h.readyState=h.WRITING}),E)}),E)};e.getFile(c,{create:!1},T(function(e){e.remove(),n()}),T(function(e){e.code===e.NOT_FOUND_ERR?n():E()}))}),E)}),E)):void E())},m=g.prototype,y=function(e,t,n){return new g(e,t,n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return n||(e=v(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(m.abort=function(){var e=this;e.readyState=e.DONE,d(e,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,y)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof t&&t.exports?t.exports.saveAs=r:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return r})},{}],3:[function(e,t,n){"use strict";var r,a,o,i,u,c,l,s=e("d"),f=e("es5-ext/object/valid-callable"),p=Function.prototype.apply,d=Function.prototype.call,v=Object.create,g=Object.defineProperty,m=Object.defineProperties,y=Object.prototype.hasOwnProperty,h={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return f(t),y.call(this,"__ee__")?n=this.__ee__:(n=h.value=v(null),g(this,"__ee__",h),h.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},a=function(e,t){var n,a;return f(t),a=this,r.call(this,e,n=function(){o.call(a,e,n),p.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,a,o;if(f(t),!y.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if(r=n[e],"object"==typeof r)for(o=0;a=r[o];++o)(a===t||a.__eeOnceListener__===t)&&(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else(r===t||r.__eeOnceListener__===t)&&delete n[e];return this},i=function(e){var t,n,r,a,o;if(y.call(this,"__ee__")&&(a=this.__ee__[e]))if("object"==typeof a){for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];for(a=a.slice(),t=0;r=a[t];++t)p.call(r,this,o)}else switch(arguments.length){case 1:d.call(a,this);break;case 2:d.call(a,this,arguments[1]);break;case 3:d.call(a,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];p.call(a,this,o)}},u={on:r,once:a,off:o,emit:i},c={on:s(r),once:s(a),off:s(o),emit:s(i)},l=m({},c),t.exports=n=function(e){return null==e?v(l):m(Object(e),c)},n.methods=u},{d:4,"es5-ext/object/valid-callable":13}],4:[function(e,t,n){"use strict";var r,a=e("es5-ext/object/assign"),o=e("es5-ext/object/normalize-options"),i=e("es5-ext/object/is-callable"),u=e("es5-ext/string/#/contains");r=t.exports=function(e,t){var n,r,i,c,l;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],null==e?(n=i=!0,r=!1):(n=u.call(e,"c"),r=u.call(e,"e"),i=u.call(e,"w")),l={value:t,configurable:n,enumerable:r,writable:i},c?a(o(c),l):l},r.gs=function(e,t,n){var r,c,l,s;return"string"!=typeof e?(l=n,n=t,t=e,e=null):l=arguments[3],null==t?t=void 0:i(t)?null==n?n=void 0:i(n)||(l=n,n=void 0):(l=t,t=n=void 0),null==e?(r=!0,c=!1):(r=u.call(e,"c"),c=u.call(e,"e")),s={get:t,set:n,configurable:r,enumerable:c},l?a(o(l),s):s}},{"es5-ext/object/assign":5,"es5-ext/object/is-callable":8,"es5-ext/object/normalize-options":12,"es5-ext/string/#/contains":15}],5:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":6,"./shim":7}],6:[function(e,t,n){"use strict";t.exports=function(){var e,t=Object.assign;return"function"!=typeof t?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],7:[function(e,t,n){"use strict";var r=e("../keys"),a=e("../valid-value"),o=Math.max;t.exports=function(e,t){var n,i,u,c=o(arguments.length,2);for(e=Object(a(e)),u=function(r){try{e[r]=t[r]}catch(a){n||(n=a)}},i=1;c>i;++i)t=arguments[i],r(t).forEach(u);if(void 0!==n)throw n;return e}},{"../keys":9,"../valid-value":14}],8:[function(e,t,n){"use strict";t.exports=function(e){return"function"==typeof e}},{}],9:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":10,"./shim":11}],10:[function(e,t,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],11:[function(e,t,n){"use strict";var r=Object.keys;t.exports=function(e){return r(null==e?e:Object(e))}},{}],12:[function(e,t,n){"use strict";var r=Array.prototype.forEach,a=Object.create,o=function(e,t){var n;for(n in e)t[n]=e[n]};t.exports=function(e){var t=a(null);return r.call(arguments,function(e){null!=e&&o(Object(e),t)}),t}},{}],13:[function(e,t,n){"use strict";t.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},{}],14:[function(e,t,n){"use strict";t.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},{}],15:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":16,"./shim":17}],16:[function(e,t,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"!=typeof r.contains?!1:r.contains("dwa")===!0&&r.contains("foo")===!1}},{}],17:[function(e,t,n){"use strict";var r=String.prototype.indexOf;t.exports=function(e){return r.call(this,e,arguments[1])>-1}},{}],18:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var a=e("./module/index"),o=r(a);window.MRP=o},{"./module/index":20}],19:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var a=e("event-emitter"),o=r(a),i=(0,o["default"])({}),u=Game_Troop.prototype.onBattleEnd;Game_Troop.prototype.onBattleEnd=function(){i.emit("battle.end"),u.call(this)};var c=Game_Troop.prototype.onBattleStart;Game_Troop.prototype.onBattleStart=function(){i.emit("battle.start"),c.call(this)};var l=BattleManager.endTurn.bind(BattleManager);BattleManager.endTurn=function(){l(),i.emit("turn.end")};var s=BattleManager.startTurn.bind(BattleManager);BattleManager.startTurn=function(){s(),i.emit("turn.start")},n["default"]=i},{"event-emitter":3}],20:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.MapExporter=n.OptionParser=n.BattleObserver=void 0;var o=e("./battle-observer"),i=a(o),u=e("./option-parser"),c=r(u),l=e("./map-exporter"),s=a(l);n.BattleObserver=i["default"],n.OptionParser=c,n.MapExporter=s["default"]},{"./battle-observer":19,"./map-exporter":21,"./option-parser":22}],21:[function(e,t,n){"use strict";function r(){return{TILE_WIDTH:$gameMap.tileWidth(),TILE_HEIGHT:$gameMap.tileHeight(),TILES_X:Math.floor(SceneManager._screenWidth/$gameMap.tileWidth()),TILES_Y:Math.floor(SceneManager._screenHeight/$gameMap.tileHeight()),SCREEN_WIDTH_PX:SceneManager._screenWidth,SCREEN_HEIGHT_PX:SceneManager._screenHeight}}function a(e,t,n){var a=r(),o=e*a.TILES_X,i=t*a.TILES_Y,u=o*a.TILE_WIDTH,c=i*a.TILE_HEIGHT;$gameMap._displayX=o,$gameMap._displayY=i,SceneManager.update();var l=SceneManager.snap()._canvas;n.getContext("2d").drawImage(l,u,c)}function o(){var e=r(),t=$dataMap.width*e.TILE_WIDTH,n=$dataMap.height*e.TILE_HEIGHT,o=Math.ceil(t/e.SCREEN_WIDTH_PX),u=Math.ceil(n/e.SCREEN_HEIGHT_PX),c=document.createElement("canvas");c.width=t,c.height=n;var l=$gamePlayer._opacity;$gamePlayer._opacity=0;var s=0,f=0;for(s=0;o>s;s++)for(f=0;u>f;f++)a(s,f,c);$gamePlayer._opacity=l,c.toBlob(function(e){i(e,"map.png")})}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o,e("blueimp-canvas-to-blob");var i=e("browser-filesaver").saveAs},{"blueimp-canvas-to-blob":1,"browser-filesaver":2}],22:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e){for(var t,n,r,o={args:[]};t=i(e);){var u=t,c=b(u,2);if(n=c[0],r=c[1],"object"===("undefined"==typeof n?"undefined":a(n))){o=h({},o,n);var l=r.ofType("COMMA"),s=r.ofType("KEY")&&r.advance().ofType("KEYVALSEP");if(l)e=r.advance();else{if(!s)return[o,r];e=r}}else{if(o=h({},o,{args:o.args.concat(n)}),r.empty||"COMMA"!=r.get().type)return[o,r];e=r.advance()}}return[o,e]}function i(e){return u(e)||c(e)}function u(e){if(e.length<3)return null;if(!e.ofType("KEY")||!e.advance().ofType("KEYVALSEP"))return null;var t=c(e.advance(2));return t?[r({},e.get().token,t[0]),e.advance(3)]:null}function c(e){if(e.empty)return null;var t=e.get();switch(t.type){case"NUMBER":return[Number(t.token),e.advance()];case"BARESTRING":case"KEY":return[t.token,e.advance()];case"BOOLEAN":return["true"===t.token.toLowerCase()?!0:!1,e.advance()];default:return null}}function l(e){if(e.length<3)return null;if(!e.ofType("BRA"))return null;var t=o(e.advance());if(!t)return null;var n=b(t,2),r=n[0],a=n[1];return a.ofType("KET")?[r,a.advance()]:null}function s(e){if(e.length<3)return null;var t=e.advance();if(!e.ofType("BRA")||!t.ofType("IDENTIFIER"))return null;var n=o(e.advance(2));if(!n)return null;var r=b(n,2),a=r[0],i=r[1];return i.ofType("KET")?[h({},a,{type:t.get().token}),i.advance()]:null}function f(e){return l(e)||s(e)}function p(e){var t=f(e);return t?t[0]:null}function d(e){return p((0,_.TokenStream)(L(e)))}function v(e){for(var t=(0,_.TokenStream)(L(e)),n=[];t.present;){var r=f(t);r?(n.push(r[0]),t=r[1]):t=t.advance()}return n}function g(e){return function(t){for(var n=(0,_.TokenStream)(L(t));n.present;){var r=f(n);if(r&&e(r[0]))return r[0];n=n.advance()}return null}}function m(e,t){return g(function(e){return e.type===t})(e)}function y(e,t){return v(e).filter(function(e){return e.type===t})}var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&u["return"]&&u["return"]()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(n,"__esModule",{value:!0}),n.extractFirst=void 0,n.parse=d,n.extractAll=v,n.extractFirstOfType=m,n.extractAllOfType=y;var _=e("./lexer-utils"),w=(0,_.regex)("BRA",/</),E=(0,_.regex)("KET",/>/),T=(0,_.skip)((0,_.regex)("WHITESPACE",/\s+/)),O=(0,_.regex)("IDENTIFIER",/[a-zA-Z_][a-zA-Z0-9-_]*/),x=(0,_.regex)("KEY",/[a-zA-Z_][a-zA-Z0-9-_]*/),S=(0,_.regex)("KEYVALSEP",/:/),B=((0,_.seq)(x,(0,_.optional)(T),S),(0,_.regex)("SIGNIFICANT_WHITESPACE",/\s+/)),M=(0,_.regex)("BAREWORD",/[^,:><"\s]+/),A=(0,_.concat)("BARESTRING",(0,_.seq)(M,(0,_.repeat)((0,_.notFollowedBy)((0,_.seq)(B,M),(0,_.seq)((0,_.optional)(T),S))))),I=(0,_.regex)("COMMA",/,/),k=(0,_.regex)("NUMBER",/-?[0-9]+(\.[0-9]+)?/),R=(0,_.regex)("BOOLEAN",/(true|false)/,"i"),j=(0,_.map)(JSON.parse,(0,_.regex)("BARESTRING",/"([^"]|\\")*"/)),L=(0,_.Lexer)((0,_.or)(T,w,E,I,(0,_.seq)(x,(0,_.optional)(T),S),(0,_.seq)((0,_.precededByToken)("BRA"),(0,_.optional)(T),(0,_.notFollowedBy)(O,I)),S,k,R,j,A));n.extractFirst=g(function(){return!0})},{"./lexer-utils":23}],23:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t,n){return{type:e,token:t,pos:n}}function o(e,t){return{tokens:e,newCharacterStream:t}}function i(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return{buffer:e,pos:t,length:e.length-t,present:t<e.length,empty:t>=e.length,rest:function(){return e.slice(t)},get:function(){return e[t]},advance:function(){var n=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return i(e,t+n)},take:function(n){return e.slice(t,t+n)}}}function u(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return w({},i(e,t),{advance:function(){var n=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return u(e,t+n)},flush:function(){return u(e,e.length)},Token:function(e,n){return a(e,n,t)}})}function c(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return w({},i(e,t),{advance:function(){var n=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return c(e,t+n)},ofType:function(n){return t<e.length&&e[t].type===n}})}function l(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],r=new RegExp(/^/.source+t.source,n);return function(t,n){var a;return(a=n.rest().match(r))?o([n.Token(e,a[0])],n.advance(a[0].length)):null}}function s(e){return function(t,n){var r;return(r=e(t,n))?o([],r.newCharacterStream):null}}function f(e){return function(t,n){var r;return(r=e(t,n))?o([],r.newCharacterStream):o([],n)}}function p(e,t){return function(n,a){var i=e(n,a);if(!i)return null;var u=t([].concat(r(n),r(i.tokens)),i.newCharacterStream);return u?o([].concat(r(i.tokens),r(u.tokens)),u.newCharacterStream):null}}function d(e,t,n){var r=p(e,t);if(n){for(var a=arguments.length,o=Array(a>3?a-3:0),i=3;a>i;i++)o[i-3]=arguments[i];return d.apply(void 0,[r,n].concat(o))}return r}function v(e){return function(t,n){var r=t[t.length-1];return r&&r.type==e?o([],n):null}}function g(e,t){return function(n,r){var i;if(i=t(n,r)){var u=i.tokens.map(function(t){var n=t.type,r=t.token,o=t.pos;return a(n,e(r),o)});return o(u,i.newCharacterStream)}return null}}function m(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e,n){for(var r,a=0;a<t.length;a++)if(r=t[a](e,n))return r;return null}}function y(e){return function(t,n){for(var a=[],i=0;n.present;){var u=e(a,n);if(!u)break;if(a=[].concat(r(a),r(u.tokens)),u.newCharacterStream.pos===n.pos)return o(a,u.newCharacterStream);if(i++>1e4)throw"tried to lex more than 10,000 tokens - this is probably a bug.";n=u.newCharacterStream}return o(a,n)}}function h(e,t){return function(n,r){var a=t(n,r);if(a){var i=a.tokens.map(function(e){return e.token}).join("");return o([r.Token(e,i)],a.newCharacterStream)}return null}}function b(e,t){return function(n,a){var o=e(n,a);if(!o)return null;var i=t([].concat(r(n),r(o.tokens)),o.newCharacterStream);return i?null:o}}function _(e){return function(t){var n=u(t),r=y(m(e,l("UNKNOWN",/[^]*/)));return r([],n).tokens}}var w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};Object.defineProperty(n,"__esModule",{value:!0}),n.CharacterStream=u,n.TokenStream=c,n.regex=l,n.skip=s,n.optional=f,n.seq=d,n.precededByToken=v,n.map=g,n.or=m,n.repeat=y,n.concat=h,n.notFollowedBy=b,n.Lexer=_,n.Token=a},{}]},{},[18]);