!function e(t,n,r){function a(u,i){if(!n[u]){if(!t[u]){var c="function"==typeof require&&require;if(!i&&c)return c(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[u]={exports:{}};t[u][0].call(l.exports,function(e){var n=t[u][1][e];return a(n?n:e)},l,l.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)a(r[u]);return a}({1:[function(e,t,n){"use strict";var r,a,o,u,i,c,s,l=e("d"),f=e("es5-ext/object/valid-callable"),p=Function.prototype.apply,d=Function.prototype.call,v=Object.create,m=Object.defineProperty,g=Object.defineProperties,_=Object.prototype.hasOwnProperty,h={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return f(t),_.call(this,"__ee__")?n=this.__ee__:(n=h.value=v(null),m(this,"__ee__",h),h.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},a=function(e,t){var n,a;return f(t),a=this,r.call(this,e,n=function(){o.call(a,e,n),p.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,a,o;if(f(t),!_.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if(r=n[e],"object"==typeof r)for(o=0;a=r[o];++o)(a===t||a.__eeOnceListener__===t)&&(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else(r===t||r.__eeOnceListener__===t)&&delete n[e];return this},u=function(e){var t,n,r,a,o;if(_.call(this,"__ee__")&&(a=this.__ee__[e]))if("object"==typeof a){for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];for(a=a.slice(),t=0;r=a[t];++t)p.call(r,this,o)}else switch(arguments.length){case 1:d.call(a,this);break;case 2:d.call(a,this,arguments[1]);break;case 3:d.call(a,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];p.call(a,this,o)}},i={on:r,once:a,off:o,emit:u},c={on:l(r),once:l(a),off:l(o),emit:l(u)},s=g({},c),t.exports=n=function(e){return null==e?v(s):g(Object(e),c)},n.methods=i},{d:2,"es5-ext/object/valid-callable":11}],2:[function(e,t,n){"use strict";var r,a=e("es5-ext/object/assign"),o=e("es5-ext/object/normalize-options"),u=e("es5-ext/object/is-callable"),i=e("es5-ext/string/#/contains");r=t.exports=function(e,t){var n,r,u,c,s;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],null==e?(n=u=!0,r=!1):(n=i.call(e,"c"),r=i.call(e,"e"),u=i.call(e,"w")),s={value:t,configurable:n,enumerable:r,writable:u},c?a(o(c),s):s},r.gs=function(e,t,n){var r,c,s,l;return"string"!=typeof e?(s=n,n=t,t=e,e=null):s=arguments[3],null==t?t=void 0:u(t)?null==n?n=void 0:u(n)||(s=n,n=void 0):(s=t,t=n=void 0),null==e?(r=!0,c=!1):(r=i.call(e,"c"),c=i.call(e,"e")),l={get:t,set:n,configurable:r,enumerable:c},s?a(o(s),l):l}},{"es5-ext/object/assign":3,"es5-ext/object/is-callable":6,"es5-ext/object/normalize-options":10,"es5-ext/string/#/contains":13}],3:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":4,"./shim":5}],4:[function(e,t,n){"use strict";t.exports=function(){var e,t=Object.assign;return"function"!=typeof t?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],5:[function(e,t,n){"use strict";var r=e("../keys"),a=e("../valid-value"),o=Math.max;t.exports=function(e,t){var n,u,i,c=o(arguments.length,2);for(e=Object(a(e)),i=function(r){try{e[r]=t[r]}catch(a){n||(n=a)}},u=1;c>u;++u)t=arguments[u],r(t).forEach(i);if(void 0!==n)throw n;return e}},{"../keys":7,"../valid-value":12}],6:[function(e,t,n){"use strict";t.exports=function(e){return"function"==typeof e}},{}],7:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":8,"./shim":9}],8:[function(e,t,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],9:[function(e,t,n){"use strict";var r=Object.keys;t.exports=function(e){return r(null==e?e:Object(e))}},{}],10:[function(e,t,n){"use strict";var r=Array.prototype.forEach,a=Object.create,o=function(e,t){var n;for(n in e)t[n]=e[n]};t.exports=function(e){var t=a(null);return r.call(arguments,function(e){null!=e&&o(Object(e),t)}),t}},{}],11:[function(e,t,n){"use strict";t.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},{}],12:[function(e,t,n){"use strict";t.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},{}],13:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":14,"./shim":15}],14:[function(e,t,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"!=typeof r.contains?!1:r.contains("dwa")===!0&&r.contains("foo")===!1}},{}],15:[function(e,t,n){"use strict";var r=String.prototype.indexOf;t.exports=function(e){return r.call(this,e,arguments[1])>-1}},{}],16:[function(e,t,n){var r=e("./internal/_curry2"),a=e("./internal/_dispatchable"),o=e("./internal/_xfindIndex");t.exports=r(a("findIndex",o,function(e,t){for(var n=0,r=t.length;r>n;){if(e(t[n]))return n;n+=1}return-1}))},{"./internal/_curry2":18,"./internal/_dispatchable":19,"./internal/_xfindIndex":25}],17:[function(e,t,n){t.exports=function(e){return function t(n){return 0===arguments.length?t:null!=n&&n["@@functional/placeholder"]===!0?t:e.apply(this,arguments)}}},{}],18:[function(e,t,n){var r=e("./_curry1");t.exports=function(e){return function t(n,a){var o=arguments.length;return 0===o?t:1===o&&null!=n&&n["@@functional/placeholder"]===!0?t:1===o?r(function(t){return e(n,t)}):2===o&&null!=n&&n["@@functional/placeholder"]===!0&&null!=a&&a["@@functional/placeholder"]===!0?t:2===o&&null!=n&&n["@@functional/placeholder"]===!0?r(function(t){return e(t,a)}):2===o&&null!=a&&a["@@functional/placeholder"]===!0?r(function(t){return e(n,t)}):e(n,a)}}},{"./_curry1":17}],19:[function(e,t,n){var r=e("./_isArray"),a=e("./_isTransformer"),o=e("./_slice");t.exports=function(e,t,n){return function(){var u=arguments.length;if(0===u)return n();var i=arguments[u-1];if(!r(i)){var c=o(arguments,0,u-1);if("function"==typeof i[e])return i[e].apply(i,c);if(a(i)){var s=t.apply(null,c);return s(i)}}return n.apply(this,arguments)}}},{"./_isArray":20,"./_isTransformer":21,"./_slice":23}],20:[function(e,t,n){t.exports=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)}},{}],21:[function(e,t,n){t.exports=function(e){return"function"==typeof e["@@transducer/step"]}},{}],22:[function(e,t,n){t.exports=function(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}},{}],23:[function(e,t,n){t.exports=function r(e,t,n){switch(arguments.length){case 1:return r(e,0,e.length);case 2:return r(e,t,e.length);default:for(var a=[],o=0,u=Math.max(0,Math.min(e.length,n)-t);u>o;)a[o]=e[t+o],o+=1;return a}}},{}],24:[function(e,t,n){t.exports={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}}},{}],25:[function(e,t,n){var r=e("./_curry2"),a=e("./_reduced"),o=e("./_xfBase");t.exports=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=o.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.found=!0,e=a(this.xf["@@transducer/step"](e,this.idx))),e},r(function(t,n){return new e(t,n)})}()},{"./_curry2":18,"./_reduced":22,"./_xfBase":24}],26:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var a=e("./module/index"),o=r(a);o.OSXFixes.InstallAllFixes(),o.ChangeTextSpeed.install(),window.MRP=o},{"./module/index":33}],27:[function(e,t,n){"use strict";function r(){var e=Window_Base.prototype.processCharacter;Window_Base.prototype.processCharacter=function(t){return"undefined"==typeof t.slowdown?e.apply(this,arguments):("undefined"==typeof t.slowdownCounter&&(t.slowdownCounter=0),t.slowdownCounter++>=t.slowdown?(t.slowdownCounter=0,e.apply(this,arguments)):void 0)};var t=Window_Message.prototype.processEscapeCharacter;Window_Message.prototype.processEscapeCharacter=function(e,n){if("S"===e){var r=Number(this.obtainEscapeParam(n));n.slowdown=r?r:null}else t.apply(this,arguments)}}Object.defineProperty(n,"__esModule",{value:!0}),n.install=r},{}],28:[function(e,t,n){"use strict";function r(e){$gameTemp.reserveCommonEvent(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.run=r},{}],29:[function(e,t,n){"use strict";function r(e){return $dataItems[e]}Object.defineProperty(n,"__esModule",{value:!0}),n.findItem=r},{}],30:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){var e=i["default"].App.fullArgv,t=e.map(function(e){return e.match(/file:\/\/.*/)})[0],n="win32"===f["default"].platform()?8:7;return t?s["default"].dirname(decodeURI(t[0].slice(n))):null}function o(){return window.process.env.HOME||window.process.env.USERPROFILE}Object.defineProperty(n,"__esModule",{value:!0}),n.gameDir=a,n.homeDir=o;var u=e("nw.gui"),i=r(u),c=e("path"),s=r(c),l=e("os"),f=r(l)},{"nw.gui":void 0,os:void 0,path:void 0}],31:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){var r=e.prototype[t];e.prototype[t]=function(){return n.apply(void 0,[r.bind(this)].concat(Array.prototype.slice.call(arguments)))}}function u(e,t,n){var r=e[t];e[t]=function(){return n.apply(void 0,[r.bind(e)].concat(Array.prototype.slice.call(arguments)))}}function i(e,t,n,r){e(t,n,function(e){v.emit(r+".before");for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;t>a;a++)n[a-1]=arguments[a];e.apply(void 0,n),v.emit(r+".after"),v.emit(r)})}function c(e,t,n){i(o,e,t,n)}function s(e,t,n){i(u,e,t,n)}Object.defineProperty(n,"__esModule",{value:!0});var l=e("event-emitter"),f=a(l),p=e("./map"),d=r(p),v=(0,f["default"])({});c(Game_Troop,"onBattleStart","battle.start"),c(Game_Troop,"onBattleEnd","battle.end"),c(Game_Map,"setup","map.setup"),s(BattleManager,"endTurn","turn.end"),s(BattleManager,"startTurn","turn.start"),s(BattleManager,"startAction","battleAction.start"),s(BattleManager,"endAction","battleAction.end"),s(SceneManager,"run","game.start"),c(Game_Player,"executeMove","player.move"),v.onMap=function(e,t){function n(){v.off(observer)}return v.on("map.setup",function(){(d.info().id===e||d.info().name===e)&&t()}),n},v.onRegion=function(e,t){function n(){v.off(observer)}return v.on("player.move",function(){$gamePlayer.regionId()===e&&t()}),n},n["default"]=v},{"./map":36,"event-emitter":1}],32:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./game-observer"),o=r(a),u={TILE_WIDTH_PX:null,TILE_HEIGHT_PX:null,SCREEN_WIDTH_PX:null,SCREEN_HEIGHT_PX:null,SCREEN_WIDTH_TILES:null,SCREEN_HEIGHT_TILES:null,MAP_WIDTH_TILES:null,MAP_HEIGHT_TILES:null,MAP_WIDTH_PX:null,MAP_HEIGHT_PX:null,MAP_WIDTH_PAGES:null,MAP_HEIGHT_PAGES:null};o["default"].on("game.start",function(){u.SCREEN_WIDTH_PX=SceneManager._screenWidth,u.SCREEN_HEIGHT_PX=SceneManager._screenHeight}),o["default"].on("map.setup",function(){u.TILE_WIDTH_PX=$gameMap.tileWidth(),u.TILE_HEIGHT_PX=$gameMap.tileHeight(),u.SCREEN_WIDTH_TILES=Math.floor(u.SCREEN_WIDTH_PX/u.TILE_WIDTH_PX),u.SCREEN_HEIGHT_TILES=Math.floor(u.SCREEN_HEIGHT_PX/u.TILE_HEIGHT_PX),u.MAP_WIDTH_TILES=$dataMap.width,u.MAP_HEIGHT_TILES=$dataMap.height,u.MAP_WIDTH_PX=u.MAP_WIDTH_TILES*u.TILE_WIDTH_PX,u.MAP_HEIGHT_PX=u.MAP_HEIGHT_TILES*u.TILE_HEIGHT_PX,u.MAP_WIDTH_PAGES=Math.ceil(u.MAP_WIDTH_PX/u.SCREEN_WIDTH_PX),u.MAP_HEIGHT_PAGES=Math.ceil(u.MAP_HEIGHT_PX/u.SCREEN_HEIGHT_PX)}),n["default"]=u},{"./game-observer":31}],33:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.ChangeTextSpeed=n.Map=n.Database=n.Inventory=n.CommonEvents=n.Geometry=n.OptionParser=n.GameObserver=void 0;var o=e("./game-observer"),u=a(o),i=e("./option-parser"),c=r(i),s=e("./geometry"),l=a(s),f=e("./common-events"),p=r(f),d=e("./inventory"),v=r(d),m=e("./database"),g=r(m),_=e("./map"),h=r(_),y=e("./change-text-speed"),E=r(y);if(n.GameObserver=u["default"],n.OptionParser=c,n.Geometry=l["default"],n.CommonEvents=p,n.Inventory=v,n.Database=g,n.Map=h,n.ChangeTextSpeed=E,Utils&&Utils.isNwjs&&Utils.isNwjs()){var T=e("./map-exporter")["default"],b=e("./osx-fixes");t.exports.OSXFixes=b,t.exports.MapExporter=T}},{"./change-text-speed":27,"./common-events":28,"./database":29,"./game-observer":31,"./geometry":32,"./inventory":34,"./map":36,"./map-exporter":35,"./option-parser":37,"./osx-fixes":39}],34:[function(e,t,n){"use strict";function r(e){var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1];return $gameParty.gainItem((0,o.findItem)(e),t)}function a(e){r(e,-99999)}Object.defineProperty(n,"__esModule",{value:!0}),n.addItem=r,n.clearItem=a;var o=e("./database")},{"./database":29}],35:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){e||(e=$dataMapInfos[$gameMap._mapId].name);var n=(new Date).toISOString().replace(/:/g,"-");return e=e.replace(/[^a-zA-Z0-9\s]/g,""),n+" "+e+" "+t+".png"}function o(){var e=y["default"].join((0,E.gameDir)()||(0,E.homeDir)(),"MapExporter");try{_["default"].mkdirSync(e)}catch(t){}return e}function u(e,t){return y["default"].join(o(),a(e,t))}function i(e,t,n,r,a){var o=(e+t)*m["default"].SCREEN_WIDTH_TILES,u=(n+r)*m["default"].SCREEN_HEIGHT_TILES,i=t*m["default"].SCREEN_WIDTH_PX,c=r*m["default"].SCREEN_HEIGHT_PX;$gameMap._displayX=o,$gameMap._displayY=u,SceneManager.updateScene(),SceneManager.renderScene();var s=SceneManager.snap()._canvas;a.getContext("2d").drawImage(s,i,c)}function c(e,t,n,r){var a=Math.ceil(r/n);if(e=Math.min(e,a),t=Math.min(t,a),e>=t)throw"tried to compute a width or height of size 0: "+JSON.stringify([].slice.apply(arguments));if(t===a)var o=(t-e-1)*n+(r%n||n);else var o=(t-e)*n;return o}function s(e,t,n,r,a,o){e=Math.min(e,m["default"].MAP_WIDTH_PAGES),t=Math.min(t,m["default"].MAP_WIDTH_PAGES),n=Math.min(n,m["default"].MAP_HEIGHT_PAGES),r=Math.min(r,m["default"].MAP_HEIGHT_PAGES);var s=c(e,t,m["default"].SCREEN_WIDTH_PX,m["default"].MAP_WIDTH_PX),l=c(n,r,m["default"].SCREEN_HEIGHT_PX,m["default"].MAP_HEIGHT_PX),f=$gameMap._displayX,p=$gameMap._displayY,d=document.createElement("canvas");d.width=s,d.height=l;var v=$gamePlayer._opacity;$gamePlayer._opacity=0;var g,h;for(g=e;t>g;g++)for(h=n;r>h;h++)i(e,g-e,n,h-n,d);$gamePlayer._opacity=v;var y=d.toDataURL().replace(/^data:image\/(png|jpg|jpeg);base64,/,"");_["default"].writeFileSync(u(a,o),y,"base64"),$gameMap._displayY=p,$gameMap._displayX=f}function l(e,t){var n=0,r=0,a=0,o=0;do{a=0,o=0;do s(n,n+e,a,a+e,t,""+r+o),a+=e,o++;while(a+e<=m["default"].MAP_HEIGHT_PAGES);n+=e,r++}while(n+e<=m["default"].MAP_WIDTH_PAGES)}function f(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.pagesPerImage,n=void 0===t?16:t,r=e.basename,a=void 0===r?null:r;if(0>=n)throw"pagesPerImage must be > 0";requestAnimationFrame(function(){l(n,a),d["default"].Shell.openItem(o())})}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=f;var p=e("nw.gui"),d=r(p),v=e("./geometry"),m=r(v),g=e("fs"),_=r(g),h=e("path"),y=r(h),E=e("./directories");if(!Utils.isNwjs())throw"rmmv-mrp-core/map-exporter can only be run during development"},{"./directories":30,"./geometry":32,fs:void 0,"nw.gui":void 0,path:void 0}],36:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){var e=arguments.length<=0||void 0===arguments[0]?function(){return!0}:arguments[0];return $gameMap.events().map(function(e){return i(e.eventId())}).filter(e)}function o(e){return"number"==typeof e?i(e):c(e)}function u(){return $dataMapInfos[$gameMap.mapId()]}function i(e){var t=$dataMap.events[e],n=$gameMap._events[e];if(!t)throw"could not find event definition with id "+e;if(!n)throw"could not find event instance with id "+e;return{definition:t,instance:n,id:e}}function c(e){var t=(0,l["default"])(function(t){return t&&t.name===e},$dataMap.events);if(0>t)throw"could not find event with name "+e;return i(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.events=a,n.event=o,n.info=u;var s=e("ramda/src/findIndex"),l=r(s)},{"ramda/src/findIndex":16}],37:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e){for(var t,n,r,o={args:[]};t=u(e);){var i=t,c=T(i,2);if(n=c[0],r=c[1],"object"===("undefined"==typeof n?"undefined":a(n))){o=E({},o,n);var s=r.ofType("COMMA"),l=r.ofType("KEY")&&r.advance().ofType("KEYVALSEP");if(s)e=r.advance();else{if(!l)return[o,r];e=r}}else{if(o=E({},o,{args:o.args.concat(n)}),r.empty||"COMMA"!=r.get().type)return[o,r];e=r.advance()}}return[o,e]}function u(e){return i(e)||c(e)}function i(e){if(e.length<3)return null;if(!e.ofType("KEY")||!e.advance().ofType("KEYVALSEP"))return null;var t=c(e.advance(2));return t?[r({},e.get().token,t[0]),e.advance(3)]:null}function c(e){if(e.empty)return null;var t=e.get(),n=t.token,r=t.type;switch(r){case"NUMBER":return[Number(n),e.advance()];case"QUOTEDSTRING":return[C(n),e.advance()];case"BARESTRING":case"KEY":return[n,e.advance()];case"BOOLEAN":return["true"===n.toLowerCase()?!0:!1,e.advance()];default:return null}}function s(e){if(e.length<3)return null;if(!e.ofType("BRA"))return null;var t=o(e.advance());if(!t)return null;var n=T(t,2),r=n[0],a=n[1];return a.ofType("KET")?[r,a.advance()]:null}function l(e){if(e.length<3)return null;var t=e.advance();if(!e.ofType("BRA")||!t.ofType("IDENTIFIER"))return null;var n=o(e.advance(2));if(!n)return null;var r=T(n,2),a=r[0],u=r[1];if(!u.ofType("KET"))return null;var i=t.get().token,c=p(function(e){return f(["BRA","SLASH","IDENTIFIER","KET"],e)&&e.advance(2).get().token===i},u.advance());if(c){var s=u.get().string,l=s.slice(u.get().pos+1,c.get().pos);return[E({},a,{type:i,block:W(l)}),c.advance(4)]}return[E({},a,{type:i}),u.advance()]}function f(e,t){for(var n=0;n<e.length;n++)if(!t.advance(n).ofType(e[n]))return!1;return!0}function p(e,t){for(;t.present;){if(e(t))return t;t=t.advance()}return null}function d(e){return s(e)||l(e)}function v(e){var t=d(e);return t?t[0]:null}function m(e){return v((0,b.TokenStream)(R(e)))}function g(e){for(var t=(0,b.TokenStream)(R(e)),n=[];t.present;){var r=d(t);r?(n.push(r[0]),t=r[1]):t=t.advance()}return n}function _(e){return function(t){for(var n=(0,b.TokenStream)(R(t));n.present;){var r=d(n);if(r&&e(r[0]))return r[0];n=n.advance()}return null}}function h(e,t){return _(function(e){return e.type===t})(e)}function y(e,t){return g(e).filter(function(e){return e.type===t})}var E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&i["return"]&&i["return"]()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(n,"__esModule",{value:!0}),n.extractFirst=n._tokenize=void 0,n.parse=m,n.extractAll=g,n.extractFirstOfType=h,n.extractAllOfType=y;var b=e("./lexer-utils"),I=(0,b.regex)("BRA",/</),x=(0,b.regex)("KET",/>/),M=(0,b.skip)((0,b.regex)("WHITESPACE",/\s+/)),w=(0,b.regex)("IDENTIFIER",/[a-zA-Z_][a-zA-Z0-9-_]*/),P=(0,b.regex)("KEY",/[a-zA-Z_][a-zA-Z0-9-_]*/),S=(0,b.regex)("KEYVALSEP",/:/),A=((0,b.seq)(P,(0,b.optional)(M),S),(0,b.regex)("SLASH",/\//)),H=(0,b.regex)("SIGNIFICANT_WHITESPACE",/\s+/),O=(0,b.regex)("BAREWORD",/[^,:><"\s]+/),j=(0,b.concat)("BARESTRING",(0,b.seq)(O,(0,b.repeat)((0,b.notFollowedBy)((0,b.seq)(H,O),(0,b.seq)((0,b.optional)(M),S))))),C=function(e){return JSON.parse(e.replace(/\n/g,"\\n"))},G=(0,b.regex)("COMMA",/,/),k=(0,b.regex)("NUMBER",/-?[0-9]+(\.[0-9]+)?/),D=(0,b.regex)("BOOLEAN",/(true|false)/,"i"),N=(0,b.regex)("QUOTEDSTRING",/"(\\.|[^"\\])*"/),R=(0,b.Lexer)((0,b.or)(M,I,x,G,(0,b.seq)(P,(0,b.optional)(M),S),(0,b.seq)((0,b.precededByToken)("BRA"),(0,b.optional)(M),(0,b.notFollowedBy)(w,G)),(0,b.seq)((0,b.precededByToken)("BRA"),A,(0,b.optional)(M),w,(0,b.optional)(M),x),S,k,D,N,j)),W=function(e){return e.replace(/^\n/,"").replace(/\n$/,"")};n._tokenize=function(e){return(0,b.TokenStream)(R(e))},n.extractFirst=_(function(){return!0})},{"./lexer-utils":38}],38:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t,n,r){return{type:e,token:t,pos:n,string:r}}function o(e,t){return{tokens:e,newCharacterStream:t}}function u(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return{buffer:e,pos:t,length:e.length-t,present:t<e.length,empty:t>=e.length,rest:function(){return e.slice(t)},get:function(){return e[t]},advance:function(){var n=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return u(e,t+n)},take:function(n){return e.slice(t,t+n)}}}function i(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return T({},u(e,t),{advance:function(){var n=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return i(e,t+n)},flush:function(){return i(e,e.length)},Token:function(n,r){return a(n,r,t,e)}})}function c(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=e.length>0?e[0].string:"";return T({},u(e,t),{advance:function(){var n=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return c(e,t+n)},ofType:function(n){return t<e.length&&e[t].type===n},string:n})}function s(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],r=new RegExp(/^/.source+t.source,n);return function(t,n){var a;return(a=n.rest().match(r))?o([n.Token(e,a[0])],n.advance(a[0].length)):null}}function l(e){return function(t,n){var r;return(r=e(t,n))?o([],r.newCharacterStream):null}}function f(e){return function(t,n){var r;return(r=e(t,n))?o([],r.newCharacterStream):o([],n)}}function p(e,t){return function(n,a){var u=e(n,a);if(!u)return null;var i=t([].concat(r(n),r(u.tokens)),u.newCharacterStream);return i?o([].concat(r(u.tokens),r(i.tokens)),i.newCharacterStream):null}}function d(e,t,n){var r=p(e,t);if(n){for(var a=arguments.length,o=Array(a>3?a-3:0),u=3;a>u;u++)o[u-3]=arguments[u];return d.apply(void 0,[r,n].concat(o))}return r}function v(e){return function(t,n){var r=t[t.length-1];return r&&r.type==e?o([],n):null}}function m(e,t){return function(n,r){var u;if(u=t(n,r)){var i=u.tokens.map(function(t){var n=t.type,r=t.token,o=t.pos,u=t.string;return a(n,e(r),o,u)});return o(i,u.newCharacterStream)}return null}}function g(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e,n){for(var r,a=0;a<t.length;a++)if(r=t[a](e,n))return r;return null}}function _(e){return function(t,n){for(var a=[],u=0;n.present;){var i=e(a,n);if(!i)break;if(a=[].concat(r(a),r(i.tokens)),i.newCharacterStream.pos===n.pos)return o(a,i.newCharacterStream);if(u++>1e4)throw"tried to lex more than 10,000 tokens - this is probably a bug.";n=i.newCharacterStream}return o(a,n)}}function h(e,t){return function(n,r){var a=t(n,r);if(a){var u=a.tokens.map(function(e){return e.token}).join("");return o([r.Token(e,u)],a.newCharacterStream)}return null}}function y(e,t){return function(n,a){var o=e(n,a);if(!o)return null;var u=t([].concat(r(n),r(o.tokens)),o.newCharacterStream);return u?null:o}}function E(e){return function(t){var n=i(t),r=_(g(e,s("UNKNOWN",/[^]*/)));return r([],n).tokens}}var T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};Object.defineProperty(n,"__esModule",{value:!0}),n.CharacterStream=i,n.TokenStream=c,n.regex=s,n.skip=l,n.optional=f,n.seq=d,n.precededByToken=v,n.map=m,n.or=g,n.repeat=_,n.concat=h,n.notFollowedBy=y,n.Lexer=E,n.Token=a},{}],39:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){if(v){var e=s["default"].Window.get(),t=new s["default"].Menu({type:"menubar"});t.createMacBuiltin("Game"),e.menu=t}}function o(){if(v){var e=s["default"].Window.get().showDevTools();e.x=50,e.y=50}}function u(){if(v){var e=s["default"].Window.get();d["default"].on("game.start.after",function(){e.isDevToolsOpen()&&o(),e.once("devtools-opened",o)})}}function i(){v&&(a(),u())}Object.defineProperty(n,"__esModule",{value:!0}),n.FixOSXCopyPaste=a,n.MoveDevToolsWindow=u,n.InstallAllFixes=i;var c=e("nw.gui"),s=r(c),l=e("os"),f=r(l),p=e("./game-observer"),d=r(p);if(!Utils.isNwjs())throw"rmmv-mrp-core/osx-fixes can only be run during development";var v=f["default"]&&"darwin"===f["default"].platform()},{"./game-observer":31,"nw.gui":void 0,os:void 0}]},{},[26]);